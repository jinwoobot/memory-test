<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name='viewport'
          content='width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no'/>
    <style>
        body {
            margin: 0;
            overflow: hidden;
        }
    </style>
    <script src='https://code.playcanvas.com/playcanvas-stable.js'></script>
</head>
<body>

<script type="text/javascript">
    var canvas = document.createElement('canvas');
    document.body.appendChild(canvas);

    var app = new pc.Application(canvas, {});
    app.start();

    app.setCanvasFillMode(pc.FILLMODE_FILL_WINDOW);
    app.setCanvasResolution(pc.RESOLUTION_AUTO);

    window.addEventListener('resize', function () {
        app.resizeCanvas();
    });

    // Camera
    var camera = new pc.Entity('camera');
    camera.addComponent('camera', {
        clearColor: [1, 1, 1]
    });
    camera.setLocalPosition(0, 0, 4);
    camera.lookAt(0, 3, -10)
    app.root.addChild(camera);


    // Light
    var light = new pc.Entity('light');
    light.addComponent('light');
    app.root.addChild(light);
    light.setEulerAngles(45, 0, 45);

    // entity
    const parent = new pc.Entity();
    parent.name = 'parent';
    app.root.addChild(parent);

    // json load
    const child = new pc.Entity();
    pc.app.assets.loadFromUrl('assets/Audi_R8_2017.json', 'model', (err, asset) => {
        console.log(asset, 'load..');
        child.addComponent('model');
        child.model.model = asset.resource;
        const parentEntity = pc.app.root.findByName('parent');
        parentEntity.addChild(child);
    });
    setTimeout(() => {
        child.destroy();
        const asset = pc.app.assets.get(-1);
        pc.app.assets.remove(asset);
    }, 9000);
</script>
</body>
</html>
